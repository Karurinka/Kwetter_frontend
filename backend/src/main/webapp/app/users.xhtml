<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <title>Accounts</title>
</head>
<body>
<ui:composition template="/template/common/commonLayout.xhtml">
  <ui:param name="searchQuery" value="#{param['query']}"/>
  <ui:define name="content">

    <c:choose>
      <c:when test="#{searchContent.size == 0}">
        Can not search with a empty search parameter
      </c:when>
      <c:otherwise>
        <h:form>
          <table class="table">
            <tr>
              <th>Username</th>
              <th>First name</th>
              <th>Last name</th>
              <th>bio</th>
              <th>email</th>
            </tr>
            <c:forEach var="user" items="#{userBean.search(searchQuery)}">
              <tr>
                <td>
                  <h:link outcome="userprofile.xhtml?user=#{user.username}">
                    #{user.username}
                  </h:link>
                </td>

                <td>#{user.location}</td>
                <td>#{account.bio}</td>
                <td>#{account.website}</td>
              </tr>
            </c:forEach>
          </table>
        </h:form>
      </c:otherwise>
    </c:choose>
  </ui:define>
</ui:composition>
</body>
</html>
